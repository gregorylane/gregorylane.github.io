#Orgqnzie so that each category starts a new line
variable <- c("Psycholsocial Wellbeing", "Mental Health Index \\hspace", "PHQ-9 \\hspace","Cohen stress scale \\hspace", "Life Satisfaction \\hspace", "Sociability \\hspace", "Self Worth \\hspace", "Locus of Control \\hspace", "Stability \\hspace",
"Health", "Days Sick \\hspace", "Days Sick >7 \\hspace",
"Cognitive Performance", "Cognitive Index \\hspace", "Math Score \\hspace", "Digit Span \\hspace",
"Gender", "Household Power Index \\hspace", "Work Rights Index \\hspace",
"Preferences", "Risk Aversion \\hspace", "Time Preference \\hspace",
"Consumption", "Savings \\hspace", "Loan Repayment \\hspace", "Necessary Goods \\hspace", "Luxury Goods \\hspace")
work_b <- c(NA, 0.214, 0.194, 0.210, 0.055, 0.085, 0.213, 0.258, 0.199, #NOTE: HAVE CHANGED SIGN OF PHQ AND STRESS FOR TABLE
NA, -0.196,  -0.124, #NOTE: these are standarized - so don't match table outcome which are in levels
NA, 0.145, 0.113, 0.210,
NA, -0.038, .114,
NA,  -0.229,-0.025,
NA, 0.086, -0.029, 0.030, 0.121) #NOTE SWITCHED SIGN ON DEBT AND DEFINED AS LOAN REPAYMENT
work_se <- c(NA,0.039, 0.069, 0.088, 0.069, 0.086, 0.071, 0.124, 0.094,
NA, 0.091, 0.088,
NA, 0.057, .092, .079,
NA, 0.066, 0.076,
NA, 0.100, 0.087,
NA, 0.093, 0.088, 0.103, 0.096)
coefs <- data.frame(variable, work_b, work_se)
# primary = read.dta13(paste0("/Users/magda/Box Sync/_Busara Field/_Project Folders (Internal)/Shapiro Cash vs Stuff/Mental health PM Plus/11_Analysis/temp/eststorage_z-scored-prim.dta"))
# primary$panel = "prim"
#
# seconday = read.dta13(paste0("/Users/tilman/Box Sync/_Busara Field/_Project Folders (Internal)/Shapiro Cash vs Stuff/Mental health PM Plus/11_Analysis/temp/eststorage_z-scored-sec.dta"))
# seconday$panel = "sec"
#
# coefs = rbind(primary, seconday)
###############
# Split coefficients by category
###############
cat = 0
for(i in 1:nrow(coefs)){
if(!grepl("\\hspace", coefs$variable[i])){
cat = cat+1
coefs[i,"cat"] = cat
}else{
coefs[i,"cat"] = cat
}
}
coefs$catname = c("mental", "health", "cognitive", "gender", "preference", "consumption")[coefs$cat]
###############
# Draw Primary and Secondary Panels
###############
#Work
df <- coefs
pdf(paste0("~/Dropbox/Projects/Bangladesh_Idleness/paper/figures/prim_panel_split_2.pdf"), width = 16, height = 9)
layout(matrix(c(1,1,2), nrow = 1, ncol = 3, byrow = TRUE))
par(mai = c(1, 0.15, 0.15, 0.15), oma=c(1.5,1.5,1.5,.5))
df$order = 99
df[df$catname=="mental","order"] = 1
df[df$catname=="health","order"] = 2
df[df$catname=="gender","order"] = 3
df[df$catname=="cognitive","order"] = 4
df[df$catname=="preference","order"] = 5
df[df$catname=="consumption","order"] = 6
df = df[order(df$order),]
number_rows = nrow(df)
cols = c("blue")
plot(1,1, type='n', bty='n', axes=F, ylab="", ylim=c(0.5,number_rows), xlim=range(c(-2,0.8)), xlab="")
abline(v=0, lty=2)
for(i in 1:nrow(df)){
row = nrow(df)+1 - i
boldmarker = ifelse(grepl("\\hspace", df$variable[i]), 0, 1)
slimtext = gsub("\\\\hspace", "", df$variable[i])
slimtext = gsub("\\$", "", slimtext)
slimtext = paste0(toupper(substr(slimtext, 1, 1)), tolower(substr(slimtext, 2, 1000)))
if(grepl("Phq9", slimtext)){
slimtext = "PHQ-9"
}
if(grepl("stress", slimtext)){
slimtext = "Cohen Stress Scale"
}
if(boldmarker == 0){
text(-0.5,row, slimtext, cex=1.5, pos=2)
} else{
text(-0.5,row, bquote(bold(.(slimtext))), cex=1.5, pos=2)
}
for(treatnum in 1){
treatname = c("work")[treatnum]
beta = df[i,paste0(treatname,"_b")]
se = df[i,paste0(treatname,"_se")]
scaler = ifelse(abs(beta/se) > 1.95, 0.6, 0.2)
points(beta, row, pch=19, col=alpha(cols[treatnum], scaler), cex=2)
points(c(beta-se*1.96, beta+se*1.96), c(row, row), type="o", pch="|", col=alpha(cols[treatnum], scaler))
}
}
axis(1, at=seq(-0.4, 0.8, 0.2), cex.axis=1.4)
mtext(text="Work vs. Cash", side=3 , adj = 0.73)
dev.off()
###############
# PM+ coefficient panels
# Tilman Graff
# 2019-09-18
# Update: 9/18/2021 by GL; Change graph to report only work vs. cash point estimates
###############
### Greg notes to self
# Need to figure out what the .dta input format looked like
#   Columns it needs to have -
#         Variable name "variable' - note, it looks like their code removes lots of latex formatting from this
#         treatname,"_b"
#         treatname,"_se"
#Notes:
# They creates two panels - we don't need this, so can ignore the "prim" and "sec" parts
# They create  coefficient categories (both numeric and with label - they do this by searching for /hspace),
# since were not importing that, I think we can just create this manually?
# It looks like the category "headers" don't have \\hspace, all others do
# - If want to have just a title, then put NA for betas / se
###############
# Preamble
###############
rm(list = ls())
#install.packages("readstata13")
#install.packages("scales")
require(readstata13)
require(scales)
###############
# Manually Input Coefficeints
###############
#Orgqnzie so that each category starts a new line
variable <- c("Psycholsocial Wellbeing", "Mental Health Index \\hspace", "PHQ-9 \\hspace","Cohen stress scale \\hspace", "Life Satisfaction \\hspace", "Sociability \\hspace", "Self Worth \\hspace", "Locus of Control \\hspace", "Stability \\hspace",
"Health", "Days Sick \\hspace", "Days Sick >7 \\hspace",
"Cognitive Performance", "Cognitive Index \\hspace", "Math Score \\hspace", "Digit Span \\hspace",
"Gender", "Household Power Index \\hspace", "Work Rights Index \\hspace",
"Preferences", "Risk Aversion \\hspace", "Time Preference \\hspace",
"Consumption", "Savings \\hspace", "Loan Repayment \\hspace", "Necessary Goods \\hspace", "Luxury Goods \\hspace")
work_b <- c(NA, 0.214, 0.194, 0.210, 0.055, 0.085, 0.213, 0.258, 0.199, #NOTE: HAVE CHANGED SIGN OF PHQ AND STRESS FOR TABLE
NA, -0.196,  -0.124, #NOTE: these are standarized - so don't match table outcome which are in levels
NA, 0.145, 0.113, 0.210,
NA, -0.038, .114,
NA,  -0.229,-0.025,
NA, 0.086, -0.029, 0.030, 0.121) #NOTE SWITCHED SIGN ON DEBT AND DEFINED AS LOAN REPAYMENT
work_se <- c(NA,0.039, 0.069, 0.088, 0.069, 0.086, 0.071, 0.124, 0.094,
NA, 0.091, 0.088,
NA, 0.057, .092, .079,
NA, 0.066, 0.076,
NA, 0.100, 0.087,
NA, 0.093, 0.088, 0.103, 0.096)
coefs <- data.frame(variable, work_b, work_se)
# primary = read.dta13(paste0("/Users/magda/Box Sync/_Busara Field/_Project Folders (Internal)/Shapiro Cash vs Stuff/Mental health PM Plus/11_Analysis/temp/eststorage_z-scored-prim.dta"))
# primary$panel = "prim"
#
# seconday = read.dta13(paste0("/Users/tilman/Box Sync/_Busara Field/_Project Folders (Internal)/Shapiro Cash vs Stuff/Mental health PM Plus/11_Analysis/temp/eststorage_z-scored-sec.dta"))
# seconday$panel = "sec"
#
# coefs = rbind(primary, seconday)
###############
# Split coefficients by category
###############
cat = 0
for(i in 1:nrow(coefs)){
if(!grepl("\\hspace", coefs$variable[i])){
cat = cat+1
coefs[i,"cat"] = cat
}else{
coefs[i,"cat"] = cat
}
}
coefs$catname = c("mental", "health", "cognitive", "gender", "preference", "consumption")[coefs$cat]
###############
# Draw Primary and Secondary Panels
###############
#Work
df <- coefs
pdf(paste0("~/Dropbox/Projects/Bangladesh_Idleness/paper/figures/prim_panel_split_2.pdf"), width = 16, height = 9)
layout(matrix(c(1,1,2), nrow = 1, ncol = 3, byrow = TRUE))
par(mai = c(1, 0.15, 0.15, 0.15), oma=c(1.5,1.5,1.5,.5))
df$order = 99
df[df$catname=="mental","order"] = 1
df[df$catname=="health","order"] = 2
df[df$catname=="gender","order"] = 3
df[df$catname=="cognitive","order"] = 4
df[df$catname=="preference","order"] = 5
df[df$catname=="consumption","order"] = 6
df = df[order(df$order),]
number_rows = nrow(df)
cols = c("blue")
plot(1,1, type='n', bty='n', axes=F, ylab="", ylim=c(0.5,number_rows), xlim=range(c(-2,0.8)), xlab="")
abline(v=0, lty=2)
for(i in 1:nrow(df)){
row = nrow(df)+1 - i
boldmarker = ifelse(grepl("\\hspace", df$variable[i]), 0, 1)
slimtext = gsub("\\\\hspace", "", df$variable[i])
slimtext = gsub("\\$", "", slimtext)
slimtext = paste0(toupper(substr(slimtext, 1, 1)), tolower(substr(slimtext, 2, 1000)))
if(grepl("Phq9", slimtext)){
slimtext = "PHQ-9"
}
if(grepl("stress", slimtext)){
slimtext = "Cohen Stress Scale"
}
if(boldmarker == 0){
text(-0.5,row, slimtext, cex=1.5, pos=2)
} else{
text(-0.5,row, bquote(bold(.(slimtext))), cex=1.5, pos=2)
}
for(treatnum in 1){
treatname = c("work")[treatnum]
beta = df[i,paste0(treatname,"_b")]
se = df[i,paste0(treatname,"_se")]
scaler = ifelse(abs(beta/se) > 1.95, 0.6, 0.2)
points(beta, row, pch=19, col=alpha(cols[treatnum], scaler), cex=2)
points(c(beta-se*1.96, beta+se*1.96), c(row, row), type="o", pch="|", col=alpha(cols[treatnum], scaler))
}
}
axis(1, at=seq(-0.4, 0.8, 0.2), cex.axis=1.4)
mtext(text="Work vs. Cash", side=3 , adj = 0.73)
dev.off()
rm(list = ls())
#install.packages("readstata13")
#install.packages("scales")
require(readstata13)
require(scales)
###############
# Manually Input Coefficeints
###############
#Orgqnzie so that each category starts a new line
variable <- c("Psycholsocial Wellbeing", "\textbf{PS Index} \\hspace", "PHQ-9 \\hspace","Cohen stress scale \\hspace", "Life Satisfaction \\hspace", "Sociability \\hspace", "Self Worth \\hspace", "Locus of Control \\hspace", "Stability \\hspace",
"Health", "Days Sick \\hspace", "Days Sick >7 \\hspace",
"Cognitive Performance", "Cognitive Index \\hspace", "Math Score \\hspace", "Digit Span \\hspace",
"Gender", "Household Power Index \\hspace", "Work Rights Index \\hspace",
"Preferences", "Risk Aversion \\hspace", "Time Preference \\hspace",
"Consumption", "Savings \\hspace", "Loan Repayment \\hspace", "Necessary Goods \\hspace", "Luxury Goods \\hspace")
work_b <- c(NA, 0.214, 0.194, 0.210, 0.055, 0.085, 0.213, 0.258, 0.199, #NOTE: HAVE CHANGED SIGN OF PHQ AND STRESS FOR TABLE
NA, -0.196,  -0.124, #NOTE: these are standarized - so don't match table outcome which are in levels
NA, 0.145, 0.113, 0.210,
NA, -0.038, .114,
NA,  -0.229,-0.025,
NA, 0.086, -0.029, 0.030, 0.121) #NOTE SWITCHED SIGN ON DEBT AND DEFINED AS LOAN REPAYMENT
work_se <- c(NA,0.039, 0.069, 0.088, 0.069, 0.086, 0.071, 0.124, 0.094,
NA, 0.091, 0.088,
NA, 0.057, .092, .079,
NA, 0.066, 0.076,
NA, 0.100, 0.087,
NA, 0.093, 0.088, 0.103, 0.096)
coefs <- data.frame(variable, work_b, work_se)
# primary = read.dta13(paste0("/Users/magda/Box Sync/_Busara Field/_Project Folders (Internal)/Shapiro Cash vs Stuff/Mental health PM Plus/11_Analysis/temp/eststorage_z-scored-prim.dta"))
# primary$panel = "prim"
#
# seconday = read.dta13(paste0("/Users/tilman/Box Sync/_Busara Field/_Project Folders (Internal)/Shapiro Cash vs Stuff/Mental health PM Plus/11_Analysis/temp/eststorage_z-scored-sec.dta"))
# seconday$panel = "sec"
#
# coefs = rbind(primary, seconday)
###############
# Split coefficients by category
###############
cat = 0
for(i in 1:nrow(coefs)){
if(!grepl("\\hspace", coefs$variable[i])){
cat = cat+1
coefs[i,"cat"] = cat
}else{
coefs[i,"cat"] = cat
}
}
coefs$catname = c("mental", "health", "cognitive", "gender", "preference", "consumption")[coefs$cat]
###############
# Draw Primary and Secondary Panels
###############
#Work
df <- coefs
pdf(paste0("~/Dropbox/Projects/Bangladesh_Idleness/paper/figures/prim_panel_split_2.pdf"), width = 16, height = 9)
layout(matrix(c(1,1,2), nrow = 1, ncol = 3, byrow = TRUE))
par(mai = c(1, 0.15, 0.15, 0.15), oma=c(1.5,1.5,1.5,.5))
df$order = 99
df[df$catname=="mental","order"] = 1
df[df$catname=="health","order"] = 2
df[df$catname=="gender","order"] = 3
df[df$catname=="cognitive","order"] = 4
df[df$catname=="preference","order"] = 5
df[df$catname=="consumption","order"] = 6
df = df[order(df$order),]
number_rows = nrow(df)
cols = c("blue")
plot(1,1, type='n', bty='n', axes=F, ylab="", ylim=c(0.5,number_rows), xlim=range(c(-2,0.8)), xlab="")
abline(v=0, lty=2)
for(i in 1:nrow(df)){
row = nrow(df)+1 - i
boldmarker = ifelse(grepl("\\hspace", df$variable[i]), 0, 1)
slimtext = gsub("\\\\hspace", "", df$variable[i])
slimtext = gsub("\\$", "", slimtext)
slimtext = paste0(toupper(substr(slimtext, 1, 1)), tolower(substr(slimtext, 2, 1000)))
if(grepl("Phq9", slimtext)){
slimtext = "PHQ-9"
}
if(grepl("stress", slimtext)){
slimtext = "Cohen Stress Scale"
}
if(boldmarker == 0){
text(-0.5,row, slimtext, cex=1.5, pos=2)
} else{
text(-0.5,row, bquote(bold(.(slimtext))), cex=1.5, pos=2)
}
for(treatnum in 1){
treatname = c("work")[treatnum]
beta = df[i,paste0(treatname,"_b")]
se = df[i,paste0(treatname,"_se")]
scaler = ifelse(abs(beta/se) > 1.95, 0.6, 0.2)
points(beta, row, pch=19, col=alpha(cols[treatnum], scaler), cex=2)
points(c(beta-se*1.96, beta+se*1.96), c(row, row), type="o", pch="|", col=alpha(cols[treatnum], scaler))
}
}
axis(1, at=seq(-0.4, 0.8, 0.2), cex.axis=1.4)
mtext(text="Work vs. Cash", side=3 , adj = 0.73)
dev.off()
### Greg notes to self
# Need to figure out what the .dta input format looked like
#   Columns it needs to have -
#         Variable name "variable' - note, it looks like their code removes lots of latex formatting from this
#         treatname,"_b"
#         treatname,"_se"
#Notes:
# They creates two panels - we don't need this, so can ignore the "prim" and "sec" parts
# They create  coefficient categories (both numeric and with label - they do this by searching for /hspace),
# since were not importing that, I think we can just create this manually?
# It looks like the category "headers" don't have \\hspace, all others do
# - If want to have just a title, then put NA for betas / se
###############
# Preamble
###############
rm(list = ls())
#install.packages("readstata13")
#install.packages("scales")
require(readstata13)
require(scales)
###############
# Manually Input Coefficeints
###############
#Orgqnzie so that each category starts a new line
variable <- c("Psycholsocial Wellbeing", "PS Index \\hspace", "PHQ-9 \\hspace","Cohen stress scale \\hspace", "Life Satisfaction \\hspace", "Sociability \\hspace", "Self Worth \\hspace", "Locus of Control \\hspace", "Stability \\hspace",
"Health", "Days Sick \\hspace", "Days Sick >7 \\hspace",
"Cognitive Performance", "Cognitive Index \\hspace", "Math Score \\hspace", "Digit Span \\hspace",
"Gender", "Household Power Index \\hspace", "Work Rights Index \\hspace",
"Preferences", "Risk Aversion \\hspace", "Time Preference \\hspace",
"Consumption", "Savings \\hspace", "Loan Repayment \\hspace", "Necessary Goods \\hspace", "Luxury Goods \\hspace")
work_b <- c(NA, 0.214, 0.194, 0.210, 0.055, 0.085, 0.213, 0.258, 0.199, #NOTE: HAVE CHANGED SIGN OF PHQ AND STRESS FOR TABLE
NA, -0.196,  -0.124, #NOTE: these are standarized - so don't match table outcome which are in levels
NA, 0.145, 0.113, 0.210,
NA, -0.038, .114,
NA,  -0.229,-0.025,
NA, 0.086, -0.029, 0.030, 0.121) #NOTE SWITCHED SIGN ON DEBT AND DEFINED AS LOAN REPAYMENT
work_se <- c(NA,0.039, 0.069, 0.088, 0.069, 0.086, 0.071, 0.124, 0.094,
NA, 0.091, 0.088,
NA, 0.057, .092, .079,
NA, 0.066, 0.076,
NA, 0.100, 0.087,
NA, 0.093, 0.088, 0.103, 0.096)
coefs <- data.frame(variable, work_b, work_se)
# primary = read.dta13(paste0("/Users/magda/Box Sync/_Busara Field/_Project Folders (Internal)/Shapiro Cash vs Stuff/Mental health PM Plus/11_Analysis/temp/eststorage_z-scored-prim.dta"))
# primary$panel = "prim"
#
# seconday = read.dta13(paste0("/Users/tilman/Box Sync/_Busara Field/_Project Folders (Internal)/Shapiro Cash vs Stuff/Mental health PM Plus/11_Analysis/temp/eststorage_z-scored-sec.dta"))
# seconday$panel = "sec"
#
# coefs = rbind(primary, seconday)
###############
# Split coefficients by category
###############
cat = 0
for(i in 1:nrow(coefs)){
if(!grepl("\\hspace", coefs$variable[i])){
cat = cat+1
coefs[i,"cat"] = cat
}else{
coefs[i,"cat"] = cat
}
}
coefs$catname = c("mental", "health", "cognitive", "gender", "preference", "consumption")[coefs$cat]
###############
# Draw Primary and Secondary Panels
###############
#Work
df <- coefs
pdf(paste0("~/Dropbox/Projects/Bangladesh_Idleness/paper/figures/prim_panel_split_2.pdf"), width = 16, height = 9)
layout(matrix(c(1,1,2), nrow = 1, ncol = 3, byrow = TRUE))
par(mai = c(1, 0.15, 0.15, 0.15), oma=c(1.5,1.5,1.5,.5))
df$order = 99
df[df$catname=="mental","order"] = 1
df[df$catname=="health","order"] = 2
df[df$catname=="gender","order"] = 3
df[df$catname=="cognitive","order"] = 4
df[df$catname=="preference","order"] = 5
df[df$catname=="consumption","order"] = 6
df = df[order(df$order),]
number_rows = nrow(df)
cols = c("blue")
plot(1,1, type='n', bty='n', axes=F, ylab="", ylim=c(0.5,number_rows), xlim=range(c(-2,0.8)), xlab="")
abline(v=0, lty=2)
for(i in 1:nrow(df)){
row = nrow(df)+1 - i
boldmarker = ifelse(grepl("\\hspace", df$variable[i]), 0, 1)
slimtext = gsub("\\\\hspace", "", df$variable[i])
slimtext = gsub("\\$", "", slimtext)
slimtext = paste0(toupper(substr(slimtext, 1, 1)), tolower(substr(slimtext, 2, 1000)))
if(grepl("Phq9", slimtext)){
slimtext = "PHQ-9"
}
if(grepl("stress", slimtext)){
slimtext = "Cohen Stress Scale"
}
if(boldmarker == 0){
text(-0.5,row, slimtext, cex=1.5, pos=2)
} else{
text(-0.5,row, bquote(bold(.(slimtext))), cex=1.5, pos=2)
}
for(treatnum in 1){
treatname = c("work")[treatnum]
beta = df[i,paste0(treatname,"_b")]
se = df[i,paste0(treatname,"_se")]
scaler = ifelse(abs(beta/se) > 1.95, 0.6, 0.2)
points(beta, row, pch=19, col=alpha(cols[treatnum], scaler), cex=2)
points(c(beta-se*1.96, beta+se*1.96), c(row, row), type="o", pch="|", col=alpha(cols[treatnum], scaler))
}
}
axis(1, at=seq(-0.4, 0.8, 0.2), cex.axis=1.4)
mtext(text="Work vs. Cash", side=3 , adj = 0.73)
dev.off()
require(readstata13)
require(scales)
###############
# Manually Input Coefficeints
###############
#Orgqnzie so that each category starts a new line
variable <- c("Psychosocial Wellbeing", "Psychosocial Index \\hspace", "PHQ-9 \\hspace","Cohen stress scale \\hspace", "Life Satisfaction \\hspace", "Sociability \\hspace", "Self Worth \\hspace", "Locus of Control \\hspace", "Stability \\hspace",
"Health", "Days Sick \\hspace", "Days Sick >7 \\hspace",
"Cognitive Performance", "Cognitive Index \\hspace", "Math Score \\hspace", "Digit Span \\hspace",
"Gender", "Household Power Index \\hspace", "Work Rights Index \\hspace",
"Preferences", "Risk Aversion \\hspace", "Time Preference \\hspace",
"Consumption", "Savings \\hspace", "Loan Repayment \\hspace", "Necessary Goods \\hspace", "Luxury Goods \\hspace")
work_b <- c(NA, 0.214, 0.194, 0.210, 0.055, 0.085, 0.213, 0.258, 0.199, #NOTE: HAVE CHANGED SIGN OF PHQ AND STRESS FOR TABLE
NA, -0.196,  -0.124, #NOTE: these are standarized - so don't match table outcome which are in levels
NA, 0.145, 0.113, 0.210,
NA, -0.038, .114,
NA,  -0.229,-0.025,
NA, 0.086, -0.029, 0.030, 0.121) #NOTE SWITCHED SIGN ON DEBT AND DEFINED AS LOAN REPAYMENT
work_se <- c(NA,0.039, 0.069, 0.088, 0.069, 0.086, 0.071, 0.124, 0.094,
NA, 0.091, 0.088,
NA, 0.057, .092, .079,
NA, 0.066, 0.076,
NA, 0.100, 0.087,
NA, 0.093, 0.088, 0.103, 0.096)
coefs <- data.frame(variable, work_b, work_se)
# primary = read.dta13(paste0("/Users/magda/Box Sync/_Busara Field/_Project Folders (Internal)/Shapiro Cash vs Stuff/Mental health PM Plus/11_Analysis/temp/eststorage_z-scored-prim.dta"))
# primary$panel = "prim"
#
# seconday = read.dta13(paste0("/Users/tilman/Box Sync/_Busara Field/_Project Folders (Internal)/Shapiro Cash vs Stuff/Mental health PM Plus/11_Analysis/temp/eststorage_z-scored-sec.dta"))
# seconday$panel = "sec"
#
# coefs = rbind(primary, seconday)
###############
# Split coefficients by category
###############
cat = 0
for(i in 1:nrow(coefs)){
if(!grepl("\\hspace", coefs$variable[i])){
cat = cat+1
coefs[i,"cat"] = cat
}else{
coefs[i,"cat"] = cat
}
}
coefs$catname = c("mental", "health", "cognitive", "gender", "preference", "consumption")[coefs$cat]
###############
# Draw Primary and Secondary Panels
###############
#Work
df <- coefs
pdf(paste0("~/Dropbox/Projects/Bangladesh_Idleness/paper/figures/prim_panel_split_2.pdf"), width = 16, height = 9)
layout(matrix(c(1,1,2), nrow = 1, ncol = 3, byrow = TRUE))
par(mai = c(1, 0.15, 0.15, 0.15), oma=c(1.5,1.5,1.5,.5))
df$order = 99
df[df$catname=="mental","order"] = 1
df[df$catname=="health","order"] = 2
df[df$catname=="gender","order"] = 3
df[df$catname=="cognitive","order"] = 4
df[df$catname=="preference","order"] = 5
df[df$catname=="consumption","order"] = 6
df = df[order(df$order),]
number_rows = nrow(df)
cols = c("blue")
plot(1,1, type='n', bty='n', axes=F, ylab="", ylim=c(0.5,number_rows), xlim=range(c(-2,0.8)), xlab="")
abline(v=0, lty=2)
for(i in 1:nrow(df)){
row = nrow(df)+1 - i
boldmarker = ifelse(grepl("\\hspace", df$variable[i]), 0, 1)
slimtext = gsub("\\\\hspace", "", df$variable[i])
slimtext = gsub("\\$", "", slimtext)
slimtext = paste0(toupper(substr(slimtext, 1, 1)), tolower(substr(slimtext, 2, 1000)))
if(grepl("Phq9", slimtext)){
slimtext = "PHQ-9"
}
if(grepl("stress", slimtext)){
slimtext = "Cohen Stress Scale"
}
if(boldmarker == 0){
text(-0.5,row, slimtext, cex=1.5, pos=2)
} else{
text(-0.5,row, bquote(bold(.(slimtext))), cex=1.5, pos=2)
}
for(treatnum in 1){
treatname = c("work")[treatnum]
beta = df[i,paste0(treatname,"_b")]
se = df[i,paste0(treatname,"_se")]
scaler = ifelse(abs(beta/se) > 1.95, 0.6, 0.2)
points(beta, row, pch=19, col=alpha(cols[treatnum], scaler), cex=2)
points(c(beta-se*1.96, beta+se*1.96), c(row, row), type="o", pch="|", col=alpha(cols[treatnum], scaler))
}
}
axis(1, at=seq(-0.4, 0.8, 0.2), cex.axis=1.4)
mtext(text="Work vs. Cash", side=3 , adj = 0.73)
dev.off()
setwd("~/Documents/Website/gregorylane.github.io")
rmarkdown::render_site()
